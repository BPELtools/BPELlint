Place Short Description Here.
@@@
The name used in the optional messageExchange attribute MUST resolve to a messageExchange declared in a scope (where the process is considered the root scope) which encloses the <reply> activity and its corresponding IMA.
@@@
$messageActivity = <receive> | <onMessage> | <onEvent>
$scope = <scope> | <process>

FOREACH $messageActivity@messageExchange
	FAIL UNLESS hasCorrespondingReplyInScope($messageActivity, $messageActivity@messageExchange) AND hasMessage

hasCorrespondingReplyInScope: $node, $messageActivity@messageExchange -> boolean
	UNLESS $node EQUALS $scope
		hasCorrespondingReplyInScope(PARENT $node, $messageActivity@messageExchange)
	RETURN ANY $node<reply>@messageExchange EQUALS $messageActivity@messageExchange
@@@
ReceiveMessageExchangeNotInProcess.bpel
ReceiveMessageExchangeNotInScope.bpel
OnMessageMessageExchangeNotInProcess.bpel
OnMessageMessageExchangeNotInScope.bpel
OnEventMessageExchangeNotInProcess.bpel
OnEventMessageExchangeNotInScope.bpel
@@@
